<%= render 'nav/topnav' %>

<%= render partial: 'nav/search_bar_guided_search' %>

<% state = StateHomeDecorator.decorate(@state) %>

<div class="row limit-width-1200">
  <h1><%= state.name %> Schools</h1>
</div>

<div class="row limit-width-1200">
  <p>
    GreatSchools has profiles for more than 
    <%= state.approximate_schools_in_state %> public, public charter, 
    and private schools in <%= state.name %>. As you search for schools that 
    fit your family, youâ€™ll find information on academic performance, 
    extracurricular programs, school culture, and more.
  </p>
</div>

<div class="row limit-width-1200">
  <div class="col-xs-12 tac">
      <h2>Get started finding schools in...</h2>
  </div>
  <% state.short_cities_list.first[0..3].each_with_index do |city, index| %>
    <%= div_tag sizes: { xs: 6, sm: 3, md: 3, lg: 3 } do %>
      <div class="state_bg_<%= index+1 %>"><div class="pam"><%= link_to(city.name.upcase, city_path(city_params(@state[:long], city.name)), class: 'text_fff font-size-block') %></div></div>
    <% end %>
  <% end %>
</div>

<% column_sizes = { xs: 6, sm: 3, md: 3, lg: 3 } %>
<div class="row limit-width-1200">
  <h2>All <%= state.name %> cities <a onclick="$('.toggle-cities').slideToggle(); $(this).text(function(i, text){return text === 'See all <%= state.number_of_cities %> cities' ? 'See fewer' : 'See all <%= state.number_of_cities %> cities'; });">See all <%= state.number_of_cities %> cities</a></h2>
  <div class="toggle-cities pbxl clearfix">
    <% state.short_cities_list.each do |column_of_cities| %>
      <%= div_tag sizes: column_sizes do %>
        <% column_of_cities.each do |city| %>
          <%= link_to(city.name, city_path(city_params(@state[:long], city.name))) %></br>
        <% end %>
      <% end %>
    <% end %>
  </div>
  <div class="toggle-cities dn pbxl clearfix">
    <% state.expanded_cities_list.each do |column_of_cities| %>
      <%= div_tag sizes: column_sizes do %>
        <% column_of_cities.each do |city| %>
          <%= link_to(city.name, city_path(city_params(@state[:long], city.name))) %></br>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<% column_sizes = { xs: 6, sm: 3, md: 3, lg: 3 } %>
<div class="row bg-light-gray ">
    <div class="limit-width-1200 ptl">
      <h2><%= state.name %> school districts <a onclick="$('.toggle-districts').slideToggle(); $(this).text(function(i, text){return text === 'See all <%= state.number_of_districts %> districts' ? 'See fewer' : 'See all <%= state.number_of_districts %> districts'; });">See all <%= state.number_of_districts %> districts</a></h2>
      <div class="toggle-districts pbxl clearfix">
        <% state.short_districts_list.each do |column_of_districts| %>
          <%= div_tag sizes: column_sizes do %>
            <% column_of_districts.each do |city| %>
              <%= link_to(city.name, city_path(city_params(@state[:long], city.name))) %></br>
            <% end %>
          <% end %>
        <% end %>
      </div>
      <div class="toggle-districts dn pbxl clearfix">
        <% state.expanded_districts_list.each do |column_of_districts| %>
          <%= div_tag sizes: column_sizes do %>
            <% column_of_districts.each do |city| %>
              <%= link_to(city.name, city_path(city_params(@state[:long], city.name))) %></br>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
</div>

</br>

<%= render 'shared/state_footer', state: @state %>