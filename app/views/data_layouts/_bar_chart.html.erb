<% category_placement # The +CategoryPlacement+ that is configured to show this bar chart %>

<%= debug(data) if params[:debug] %>

<% if data.is_a?(Hash) %>
  <% data = data.values.inject([], &:+) %>
<% end %>

<%
  bar_chart = BarCharts::BasicBarChart.decorate(
  data,
  context: {
    config: category_placement.layout_config_json
    }
  )
%>

<% bar_chart_id = "barchart-#{category_placement_anchor category_placement}" %>

<div id="<%= bar_chart_id %>" class="notranslate ma"></div>

<% content_for :head do %>
  <%= bar_chart.script_tag(bar_chart_id).html_safe %>
<% end %>