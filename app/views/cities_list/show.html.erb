<% cities = @dcl.city_names %>
<% state_names = @dcl.state_names %>
<% dropdown_info = @dcl.dropdown_info %>

<div class="districts-cities-list">
  <div class="container">
      <div class="top">
        <ul style="display:inline-block; list-style-type:none;">
          <li style="float:left;"><a class="top-link" href="/schools/<%= state_names[:routing] %>/<%= state_names[:abbr] %>"> <%= t('.All schools in') %> <%= state_names[:full] %></a></li>
          <li style="float:left;"><span class="top-link"> <%= t('.All cities in') %> <%= state_names[:full] %></span></li>
          <li style="float:left;"><a class="top-link" href="/schools/districts/<%= state_names[:routing] %>/<%= state_names[:abbr] %>"><%= state_names[:full] %> School Districts</a></li>
        </ul>
        <div class="page-heading">
          <%= state_names[:full] %> <%= t('.School Information by City') %>
        </div>
        <%= t('.Show me cities in a different state') %>:

        <select id="dropdown_menu">
          <% dropdown_info.each do |st, st_name| %>
            <% if st == state_names[:abbr] %>
              <option selected><%= st %></option>
            <% else %>
              <option value="<%= cities_list_path(st_name,st) %>"> <%= st %></option>
            <% end %>
          <% end %>
        </select>

      </div>
      <div>
        <div class="table-column">
          <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr class="table-top-row">
              <th style="width: 50%"><%= state_names[:full] %> <%= t('.Cities') %></th>
            </tr>
            <% cities.each do |city| %>
                <tr>
                  <td class="city-district-link">
                    <%= link_to "#{city} " + t('.Schools'), city_url(city_params(state_names[:abbr], city)) %>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <div class="top-bottom">
    </div>
  </div>
</div>

<script>
  $(function(){
    $('#dropdown_menu').on('change', function () {
      var url = $(this).val();
      if (url) {
        window.location = url;
      }
      return false;
    });
  });
</script>