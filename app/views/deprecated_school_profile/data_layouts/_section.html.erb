<% category_placement # The +CategoryPlacement+ that is configured to show this section %>
<% section_id = category_placement.layout_config_json['section_id'] %>
<% section_class = category_placement.layout_config_json['section_class'] || '' %>

<% GSLogger.swallow_and_log_errors_unless_development(:school_profile, category_placement.attributes, 'Something went wrong when trying to render category placement') do %>
  <% children = @page_config.category_placement_children_with_data category_placement %>
  <% if children.any? && category_placement.title.present? %>
    <% partial_collection_markup = render partial: 'category_placement', collection: children, as: :category_placement %>
    <% if partial_collection_markup.present? %>
      <% section_class << ' row' %>
      <% section_title = category_placement.title %>
      <% if section_title.present? %>
        <% section_title = section_title.downcase.gsub(/\s+/, '_') %>
        <% section_title_class = "js-#{section_title}-section" %>
        <% section_class << ' ' << section_title_class %>
      <% end %>

      <%= content_tag('div', class: section_class, id: section_id) do %>
        <%= render "shared/section_header", category_placement: category_placement %>
        <%= partial_collection_markup %>
      <% end %>
    <% end %>
  <% end %>
<% end %>